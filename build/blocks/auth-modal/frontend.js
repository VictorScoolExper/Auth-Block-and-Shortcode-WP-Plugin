document.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelectorAll(".open-modal"),t=document.querySelector(".wp-block-auth-block-shortcode-auth-modal"),a=document.querySelectorAll(".modal-overlay, .modal-btn-close");e.forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault(),t.classList.add("modal-show")}))})),a.forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault(),t.classList.remove("modal-show")}))}));const s=document.querySelectorAll(".tabs a"),n=document.querySelector("#signin-tab"),r=document.querySelector("#signup-tab");s.forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault(),s.forEach((e=>{e.classList.remove("active-tab")})),e.currentTarget.classList.add("active-tab"),"#signin-tab"===e.currentTarget.getAttribute("href")?(n.style.display="block",r.style.display="none"):(n.style.display="none",r.style.display="block")}))})),r.addEventListener("submit",(async e=>{e.preventDefault();const t=r.querySelector("fieldset");t.setAttribute("disabled",!0);const a=r.querySelector("#signup-status");a.innerHTML='\n            <div class="modal-status modal-status-info">\n                Please wait! We are creating your account!\n            </div>\n        ';const s={first_name:r.querySelector("#su-first-name").value,last_name:r.querySelector("#su-last-name").value,username:r.querySelector("#su-username").value,email:r.querySelector("#su-email").value,password:r.querySelector("#su-password").value,userRegisterType:r.querySelector("#su-user-type").textContent},n=await fetch(abs_auth_rest.urls.signup,{method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":abs_auth_rest.nonce},body:JSON.stringify(s)}),l=await n.json();2===l.status?(a.innerHTML='\n                <div class="modal-status modal-status-success">\n                    Success! Your account has been created.\n                </div>\n            ',location.reload()):4===l.status?(t.removeAttribute("disabled"),a.innerHTML='\n                <div class="modal-status modal-status-danger">\n                    Unable to create account! You need a stronger password.\n                    <small>Requirements 8 characters min, uppercase, lowercase, number, special character</small>\n                </div>\n            '):(t.removeAttribute("disabled"),a.innerHTML='\n                <div class="modal-status modal-status-danger">\n                    Unable to create account! Please try again later.\n                </div>\n            ')})),n.addEventListener("submit",(async e=>{e.preventDefault();const t=n.querySelector("fieldset"),a=n.querySelector("#signin-status");t.setAttribute("disabled",!0),a.innerHTML='\n            <div class="modal-status modal-status-info">\n                Please wait! We are logging you in.\n            </div>\n        ';const s={user_login:n.querySelector("#si-email").value,password:n.querySelector("#si-password").value,remember_me:n.querySelector("#si-remember-me").checked},r=await fetch(abs_auth_rest.urls.signin,{method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":abs_auth_rest.nonce},body:JSON.stringify(s)});2===(await r.json()).status?(a.innerHTML='\n                <div class="modal-status modal-status-success">\n                    Success! You are now logged in.\n                </div>\n            ',location.reload()):(t.removeAttribute("disabled"),a.innerHTML='\n                <div class="modal-status modal-status-danger">\n                    Invalid credentials! Please try again later.\n                </div>\n            ')}))}));