{"version":3,"file":"blocks/auth-modal/frontend.js","mappings":";;;;;AAAA;AACAA,QAAQ,CAACC,gBAAgB,CAAC,kBAAkB,EAAE,MAAM;EAChD,MAAMC,YAAY,GAAGF,QAAQ,CAACG,gBAAgB,CAAC,aAAa,CAAC;EAC7D,MAAMC,OAAO,GAAGJ,QAAQ,CAACK,aAAa,CAAC,2CAA2C,CAAC;EACnF,MAAMC,YAAY,GAAGN,QAAQ,CAACG,gBAAgB,CAAC,kCAAkC,CAAC;EAElFD,YAAY,CAACK,OAAO,CAACC,EAAE,IAAI;IACvBA,EAAE,CAACP,gBAAgB,CAAC,OAAO,EAAEQ,KAAK,IAAI;MAClCA,KAAK,CAACC,cAAc,CAAC,CAAC;MAEtBN,OAAO,CAACO,SAAS,CAACC,GAAG,CAAC,YAAY,CAAC;IACvC,CAAC,CAAC;EACN,CAAC,CAAC;EAEFN,YAAY,CAACC,OAAO,CAACC,EAAE,IAAI;IACvBA,EAAE,CAACP,gBAAgB,CAAC,OAAO,EAAEQ,KAAK,IAAI;MAClCA,KAAK,CAACC,cAAc,CAAC,CAAC;MAEtBN,OAAO,CAACO,SAAS,CAACE,MAAM,CAAC,YAAY,CAAC;IAC1C,CAAC,CAAC;EACN,CAAC,CAAC;EAEF,MAAMC,IAAI,GAAGd,QAAQ,CAACG,gBAAgB,CAAC,SAAS,CAAC;EACjD,MAAMY,UAAU,GAAGf,QAAQ,CAACK,aAAa,CAAC,aAAa,CAAC;EACxD,MAAMW,UAAU,GAAGhB,QAAQ,CAACK,aAAa,CAAC,aAAa,CAAC;EAExDS,IAAI,CAACP,OAAO,CAACU,GAAG,IAAI;IAChBA,GAAG,CAAChB,gBAAgB,CAAC,OAAO,EAAEQ,KAAK,IAAI;MACnCA,KAAK,CAACC,cAAc,CAAC,CAAC;MAEtBI,IAAI,CAACP,OAAO,CAACW,UAAU,IAAI;QACvBA,UAAU,CAACP,SAAS,CAACE,MAAM,CAAC,YAAY,CAAC;MAC7C,CAAC,CAAC;MAEFJ,KAAK,CAACU,aAAa,CAACR,SAAS,CAACC,GAAG,CAAC,YAAY,CAAC;MAE/C,MAAMQ,SAAS,GAAGX,KAAK,CAACU,aAAa,CAACE,YAAY,CAAC,MAAM,CAAC;MAE1D,IAAGD,SAAS,KAAK,aAAa,EAAC;QAC3BL,UAAU,CAACO,KAAK,CAACC,OAAO,GAAG,OAAO;QAClCP,UAAU,CAACM,KAAK,CAACC,OAAO,GAAG,MAAM;MACrC,CAAC,MAAM;QACHR,UAAU,CAACO,KAAK,CAACC,OAAO,GAAG,MAAM;QACjCP,UAAU,CAACM,KAAK,CAACC,OAAO,GAAG,OAAO;MACtC;IACJ,CAAC,CAAC;EACN,CAAC,CAAC;EAEFP,UAAU,CAACf,gBAAgB,CAAC,QAAQ,EAAE,MAAMQ,KAAK,IAAI;IACjDA,KAAK,CAACC,cAAc,CAAC,CAAC;IAEtB,MAAMc,cAAc,GAAGR,UAAU,CAACX,aAAa,CAAC,UAAU,CAAC;IAC3DmB,cAAc,CAACC,YAAY,CAAC,UAAU,EAAE,IAAI,CAAC;IAE7C,MAAMC,YAAY,GAAGV,UAAU,CAACX,aAAa,CAAC,gBAAgB,CAAC;IAC/DqB,YAAY,CAACC,SAAS,GAAI;AAClC;AACA;AACA;AACA,SAAS;IAED,MAAMC,QAAQ,GAAG;MACbC,UAAU,EAAEb,UAAU,CAACX,aAAa,CAAC,gBAAgB,CAAC,CAACyB,KAAK;MAC5DC,SAAS,EAAEf,UAAU,CAACX,aAAa,CAAC,eAAe,CAAC,CAACyB,KAAK;MAC1DE,QAAQ,EAAEhB,UAAU,CAACX,aAAa,CAAC,cAAc,CAAC,CAACyB,KAAK;MACxDG,KAAK,EAAEjB,UAAU,CAACX,aAAa,CAAC,WAAW,CAAC,CAACyB,KAAK;MAClDI,QAAQ,EAAElB,UAAU,CAACX,aAAa,CAAC,cAAc,CAAC,CAACyB,KAAK;MACxDK,gBAAgB,EAAEnB,UAAU,CAACX,aAAa,CAAC,eAAe,CAAC,CAAC+B;IAChE,CAAC;IAED,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAACC,aAAa,CAACC,IAAI,CAACC,MAAM,EAAE;MACpDC,MAAM,EAAE,MAAM;MACdC,OAAO,EAAE;QACL,cAAc,EAAE,kBAAkB;QAClC,YAAY,EAAEJ,aAAa,CAACK;MAChC,CAAC;MACDC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACnB,QAAQ;IACjC,CAAC,CAAC;IAEF,MAAMoB,YAAY,GAAG,MAAMX,QAAQ,CAACY,IAAI,CAAC,CAAC;IAE1C,IAAGD,YAAY,CAACE,MAAM,KAAK,CAAC,EAAC;MACzBxB,YAAY,CAACC,SAAS,GAAI;AACtC;AACA;AACA;AACA,aAAa;;MAED;MACAwB,QAAQ,CAACC,MAAM,CAAC,CAAC;IACrB,CAAC,MAAM,IAAGJ,YAAY,CAACE,MAAM,KAAK,CAAC,EAAC;MAChC1B,cAAc,CAAC6B,eAAe,CAAC,UAAU,CAAC;MAC1C3B,YAAY,CAACC,SAAS,GAAI;AACtC;AACA;AACA;AACA;AACA,aAAa;IACL,CAAC,MAAM;MACHH,cAAc,CAAC6B,eAAe,CAAC,UAAU,CAAC;MAC1C3B,YAAY,CAACC,SAAS,GAAI;AACtC;AACA;AACA;AACA,aAAa;IACL;EACJ,CAAC,CAAC;EAEFZ,UAAU,CAACd,gBAAgB,CAAC,QAAQ,EAAE,MAAMQ,KAAK,IAAI;IACjDA,KAAK,CAACC,cAAc,CAAC,CAAC;IAEtB,MAAM4C,cAAc,GAAGvC,UAAU,CAACV,aAAa,CAAC,UAAU,CAAC;IAC3D,MAAMkD,YAAY,GAAGxC,UAAU,CAACV,aAAa,CAAC,gBAAgB,CAAC;IAE/DiD,cAAc,CAAC7B,YAAY,CAAC,UAAU,EAAE,IAAI,CAAC;IAC7C8B,YAAY,CAAC5B,SAAS,GAAI;AAClC;AACA;AACA;AACA,SAAS;IAED,MAAMC,QAAQ,GAAG;MACb4B,UAAU,EAAEzC,UAAU,CAACV,aAAa,CAAC,WAAW,CAAC,CAACyB,KAAK;MACvDI,QAAQ,EAAEnB,UAAU,CAACV,aAAa,CAAC,cAAc,CAAC,CAACyB,KAAK;MACxD2B,WAAW,EAAE1C,UAAU,CAACV,aAAa,CAAC,iBAAiB,CAAC,CAACqD;IAC7D,CAAC;IAED,MAAMrB,QAAQ,GAAG,MAAMC,KAAK,CAACC,aAAa,CAACC,IAAI,CAACmB,MAAM,EAAE;MACpDjB,MAAM,EAAE,MAAM;MACdC,OAAO,EAAE;QACL,cAAc,EAAE,kBAAkB;QAClC,YAAY,EAAEJ,aAAa,CAACK;MAChC,CAAC;MACDC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACnB,QAAQ;IACjC,CAAC,CAAC;IAEF,MAAMoB,YAAY,GAAG,MAAMX,QAAQ,CAACY,IAAI,CAAC,CAAC;IAE1C,IAAGD,YAAY,CAACE,MAAM,KAAK,CAAC,EAAC;MACzBK,YAAY,CAAC5B,SAAS,GAAI;AACtC;AACA;AACA;AACA,aAAa;MACDwB,QAAQ,CAACC,MAAM,CAAC,CAAC;IACrB,CAAC,MAAM;MACHE,cAAc,CAACD,eAAe,CAAC,UAAU,CAAC;MAC1CE,YAAY,CAAC5B,SAAS,GAAI;AACtC;AACA;AACA;AACA,aAAa;IACL;EACJ,CAAC,CAAC;AACN,CAAC,CAAC,C","sources":["webpack://auth-block-and-shortcode/./src/blocks/auth-modal/frontend.js"],"sourcesContent":["// scripts should always be downloaded on the bottom but this EventListener will help us with that\ndocument.addEventListener('DOMContentLoaded', () => {\n    const openModalBtn = document.querySelectorAll('.open-modal');\n    const modalEl = document.querySelector('.wp-block-auth-block-shortcode-auth-modal');\n    const modalCloseEl = document.querySelectorAll('.modal-overlay, .modal-btn-close');\n\n    openModalBtn.forEach(el => {\n        el.addEventListener('click', event => {\n            event.preventDefault();\n\n            modalEl.classList.add('modal-show');\n        });\n    });\n\n    modalCloseEl.forEach(el => {\n        el.addEventListener('click', event => {\n            event.preventDefault();\n\n            modalEl.classList.remove('modal-show');\n        });\n    });\n\n    const tabs = document.querySelectorAll('.tabs a');\n    const signinForm = document.querySelector('#signin-tab');\n    const signupForm = document.querySelector('#signup-tab');\n    \n    tabs.forEach(tab => {\n        tab.addEventListener('click', event => {\n            event.preventDefault();\n\n            tabs.forEach(currentTab => {\n                currentTab.classList.remove('active-tab');\n            });\n\n            event.currentTarget.classList.add('active-tab');\n\n            const activeTab = event.currentTarget.getAttribute('href');\n\n            if(activeTab === '#signin-tab'){\n                signinForm.style.display = 'block';\n                signupForm.style.display = 'none';\n            } else {\n                signinForm.style.display = 'none';\n                signupForm.style.display = 'block';\n            }\n        });\n    });\n\n    signupForm.addEventListener('submit', async event => {\n        event.preventDefault();\n\n        const signupFieldset = signupForm.querySelector('fieldset');\n        signupFieldset.setAttribute('disabled', true);\n\n        const signupStatus = signupForm.querySelector('#signup-status');\n        signupStatus.innerHTML = `\n            <div class=\"modal-status modal-status-info\">\n                Please wait! We are creating your account!\n            </div>\n        `;\n\n        const formData = {\n            first_name: signupForm.querySelector('#su-first-name').value,\n            last_name: signupForm.querySelector('#su-last-name').value,\n            username: signupForm.querySelector('#su-username').value,\n            email: signupForm.querySelector('#su-email').value,\n            password: signupForm.querySelector('#su-password').value,\n            userRegisterType: signupForm.querySelector('#su-user-type').textContent\n        }\n\n        const response = await fetch(abs_auth_rest.urls.signup, {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n                'X-WP-Nonce': abs_auth_rest.nonce,\n            },\n            body: JSON.stringify(formData)\n        });\n\n        const responseJSON = await response.json();\n\n        if(responseJSON.status === 2){\n            signupStatus.innerHTML = `\n                <div class=\"modal-status modal-status-success\">\n                    Success! Your account has been created.\n                </div>\n            `;\n\n            // we force page to refresh to view page as logged in user\n            location.reload();\n        } else if(responseJSON.status === 4){\n            signupFieldset.removeAttribute('disabled');\n            signupStatus.innerHTML = `\n                <div class=\"modal-status modal-status-danger\">\n                    Unable to create account! You need a stronger password.\n                    <small>Requirements 8 characters min, uppercase, lowercase, number, special character</small>\n                </div>\n            `;\n        } else {\n            signupFieldset.removeAttribute('disabled');\n            signupStatus.innerHTML = `\n                <div class=\"modal-status modal-status-danger\">\n                    Unable to create account! Please try again later.\n                </div>\n            `;\n        }\n    });\n\n    signinForm.addEventListener('submit', async event => {\n        event.preventDefault();\n\n        const signinFieldset = signinForm.querySelector('fieldset');\n        const signinStatus = signinForm.querySelector('#signin-status');\n\n        signinFieldset.setAttribute('disabled', true);\n        signinStatus.innerHTML = `\n            <div class=\"modal=status modal-status-info\">\n                Please wait! We are logging you in.\n            </div>\n        `;\n\n        const formData = {\n            user_login: signinForm.querySelector('#si-email').value,\n            password: signinForm.querySelector('#si-password').value,\n            remember_me: signinForm.querySelector('#si-remember-me').checked\n        };\n\n        const response = await fetch(abs_auth_rest.urls.signin, {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n                'X-WP-Nonce': abs_auth_rest.nonce,\n            },\n            body: JSON.stringify(formData)\n        });\n\n        const responseJSON = await response.json();\n\n        if(responseJSON.status === 2){\n            signinStatus.innerHTML = `\n                <div class=\"modal-status modal-status-success\">\n                    Success! You are now logged in.\n                </div>\n            `;\n            location.reload();\n        } else {\n            signinFieldset.removeAttribute('disabled');\n            signinStatus.innerHTML = `\n                <div class=\"modal-status modal-status-danger\">\n                    Invalid credentials! Please try again later.\n                </div>\n            `;\n        }\n    });\n});\n\n"],"names":["document","addEventListener","openModalBtn","querySelectorAll","modalEl","querySelector","modalCloseEl","forEach","el","event","preventDefault","classList","add","remove","tabs","signinForm","signupForm","tab","currentTab","currentTarget","activeTab","getAttribute","style","display","signupFieldset","setAttribute","signupStatus","innerHTML","formData","first_name","value","last_name","username","email","password","userRegisterType","textContent","response","fetch","abs_auth_rest","urls","signup","method","headers","nonce","body","JSON","stringify","responseJSON","json","status","location","reload","removeAttribute","signinFieldset","signinStatus","user_login","remember_me","checked","signin"],"sourceRoot":""}